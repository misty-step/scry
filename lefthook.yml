# Lefthook Git Hooks Configuration
# https://github.com/evilmartians/lefthook

pre-commit:
  parallel: true
  commands:
    # TypeScript type checking to catch compilation errors early
    typecheck:
      glob: "*.{ts,tsx}"
      run: pnpm exec tsc --noEmit
      fail_text: "TypeScript compilation failed. Fix type errors before committing."

    # Lint and format staged files
    lint-staged:
      run: pnpm exec lint-staged
      fail_text: "Linting or formatting failed. Check eslint and prettier output."

pre-push:
  parallel: false
  commands:
    # Comprehensive TypeScript check before pushing
    typecheck:
      run: pnpm exec tsc --noEmit
      fail_text: "TypeScript compilation failed. Cannot push with type errors."

    # Run tests to ensure nothing is broken
    test:
      run: pnpm test
      fail_text: "Tests failed. Fix failing tests before pushing."
